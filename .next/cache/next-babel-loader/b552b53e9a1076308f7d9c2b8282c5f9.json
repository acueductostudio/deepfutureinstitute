{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport { useEffect, useState, useRef, useCallback } from \"react\";\nimport styled, { createGlobalStyle } from \"styled-components\";\nimport Header from \"./header\";\nimport { useRouter } from \"next/router\";\nimport CookieMessage from \"./CookieMessage\";\nimport { initGA, logPageView } from \"utils/analytics\";\nimport ReactPixel from \"react-facebook-pixel\";\nimport { disableBodyScroll, enableBodyScroll } from \"body-scroll-lock\";\nimport NewsletterPopup from \"./NewsletterPopup\";\nexport default (({\n  children,\n  toggleLang,\n  checkForConsent,\n  consentToCookies,\n  hasToConsent,\n  hasLoaded,\n  locale\n}) => {\n  const {\n    0: isOpen,\n    1: setOpen\n  } = useState(false);\n  const {\n    0: showSketch,\n    1: setShowSketch\n  } = useState(true);\n  const {\n    0: isAbout,\n    1: setIsAbout\n  } = useState(false);\n  const {\n    0: headerTitle,\n    1: setTitle\n  } = useState(\"\");\n  const {\n    0: showArrow,\n    1: setShowArrow\n  } = useState(false);\n  const {\n    0: showConsentMessage,\n    1: setShowConsentMessage\n  } = useState(true);\n  const {\n    0: showPopup,\n    1: setShowPopup\n  } = useState(false);\n  const router = useRouter();\n  const mouse = useRef([1200, 1]);\n  const onMouseMove = useCallback(({\n    clientX: x,\n    clientY: y\n  }) => mouse.current = [x - window.innerWidth / 2, y - window.innerHeight / 2], [mouse.current]);\n  const onTouchMove = useCallback(e => {\n    const touch = e.changedTouches[0];\n    var x = touch.clientX;\n    var y = touch.clientY;\n    mouse.current = [x - window.innerWidth / 2, y - window.innerHeight / 2];\n  }, [mouse.current]);\n  useEffect(() => {// const options = {\n    //   autoConfig: true, \n    //   debug: false,\n    // };\n    // ReactPixel.init(\"506854653278097\", null, options);\n  }, []);\n  useEffect(() => {\n    // if (!window.GA_INITIALIZED) {\n    //   initGA();\n    //   window.GA_INITIALIZED = true;\n    // }\n    // logPageView();\n    // ReactPixel.pageView(); // For tracking page view\n    mouse.current[0] = window.innerWidth > 600 ? 1200 : 300;\n\n    if (router.route === \"/\" || router.route === \"/en\") {\n      setShowSketch(true);\n      setShowArrow(true);\n      setIsAbout(false);\n      setShowPopup(false);\n    } else if (router.route === \"/nosotros\" || router.route === \"/en/about\") {\n      setIsAbout(true);\n      setShowSketch(false);\n      setShowArrow(false);\n      setShowPopup(false);\n    } else if (router.route === \"/podcast\") {\n      setIsAbout(false);\n      setShowSketch(false);\n      setShowArrow(false);\n      setShowPopup(true);\n    } else {\n      setShowSketch(false);\n      setShowArrow(false);\n      setIsAbout(false);\n      setShowPopup(false);\n    }\n  }, [router.route]);\n  useEffect(() => {\n    if (showArrow || showConsentMessage) {\n      document.body.onscroll = function () {\n        checkScroll();\n      };\n    }\n  }, [showArrow]); // useEffect(() => {\n  //   let targetElement = document.querySelector(\"#Nav\");\n  //   if (isOpen) {\n  //     disableBodyScroll(targetElement);\n  //   } else {\n  //     enableBodyScroll(targetElement);\n  //   }\n  // }, [isOpen]);\n\n  const checkScroll = () => {\n    if (document.body.scrollTop > 100 || window.scrollY > 100) {\n      document.body.onscroll = null; // document.querySelector(\"#Clipper\").onscroll = null;\n\n      setShowArrow(false);\n      checkForConsent();\n      setShowConsentMessage(false);\n    }\n  };\n\n  const toggleNav = () => {\n    setOpen(!isOpen);\n  };\n\n  const closeNav = () => {\n    setOpen(false);\n  };\n\n  const doConsentToCookies = () => {\n    consentToCookies();\n  };\n\n  return __jsx(React.Fragment, null, __jsx(PageWrapper, {\n    id: \"Wrapper\",\n    onMouseMove: showSketch | isAbout ? onMouseMove : undefined,\n    onTouchMove: showSketch | isAbout ? onTouchMove : undefined\n  }, __jsx(Header, {\n    isOpen: isOpen,\n    headerTitle: headerTitle,\n    hasLoaded: hasLoaded,\n    closeNav: closeNav,\n    locale: locale,\n    route: router.route\n  }), React.cloneElement(children, {\n    setTitle: setTitle,\n    hasLoaded: hasLoaded,\n    mouse: mouse\n  }), __jsx(CookieMessage, {\n    locale: locale,\n    doConsentToCookies: doConsentToCookies,\n    hasToConsent: hasToConsent\n  }), __jsx(BodyOverflow, {\n    isOpen: isOpen,\n    hasLoaded: hasLoaded\n  }), showPopup && __jsx(NewsletterPopup, null)));\n});\nconst BodyOverflow = createGlobalStyle`\n  .TopBar{\n    box-shadow: 1px 1px 4px ${props => props.theme.colors.accent};\n  }\n  @media (max-width: 600px), (max-height:450px) {\n    .react-reveal {\n    animation: none !important;\n    opacity: 1 !important;\n    }\n    #Wrapper{\n      overflow: ${props => props.hasLoaded ? \"unset\" : \"hidden\"};\n      height:${props => props.hasLoaded ? \"unset\" : \"100%\"};\n    }\n    body {\n    overflow-y: ${props => props.hasLoaded ? \"auto\" : \"hidden\"};\n      &:after,&:before{\n        content: \" \";\n        position: fixed;\n        right: 0;\n        left: 0;\n        height: 18px;\n        z-index:100;\n        background-color: ${props => props.theme.colors.background};\n      }\n      &:before {\n        top:0;\n      }\n      &:after {\n        bottom:0;\n      }\n    }  \n  }\n`;\nconst BackgroundOpacity = styled.div.withConfig({\n  displayName: \"layout__BackgroundOpacity\",\n  componentId: \"sc-18mrapy-0\"\n})([\"background-color:\", \";opacity:\", \";position:fixed;pointer-events:\", \";left:0;bottom:0;right:0;top:0;z-index:13;transition:opacity 0.4s ease;\"], props => props.theme.colors.background, props => props.visible ? 0.6 : 0, props => props.visible ? \"auto\" : \"none\");\nconst PageWrapper = styled.div.withConfig({\n  displayName: \"layout__PageWrapper\",\n  componentId: \"sc-18mrapy-1\"\n})([\"top:-3px;position:relative;width:100%;flex-direction:column;display:flex;justify-content:flex-start;color:\", \";background-color:\", \";\"], props => props.theme.colors.foreground, props => props.theme.colors.background);\nconst Border = styled.div.withConfig({\n  displayName: \"layout__Border\",\n  componentId: \"sc-18mrapy-2\"\n})([\"opacity:1;pointer-events:none;z-index:99;width:calc(100% - 36px);height:calc(100% - 36px);background-color:none;position:fixed;left:18px;top:18px;right:18px;bottom:18px;margin:0 auto;max-width:1504px;mix-blend-mode:exclusion;transition:opacity 0.3s ease-in,border 0.3s ease-in;border:\", \";@media (max-width:600px),(max-height:450px){mix-blend-mode:normal;}\"], props => `${props.theme.stroke} solid ${props.theme.colors.foreground}`);","map":null,"metadata":{},"sourceType":"module"}