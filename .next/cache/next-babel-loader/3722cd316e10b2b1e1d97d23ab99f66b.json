{"ast":null,"code":"var _jsxFileName = \"/Users/rodrigosalmeron/Sites/deepfuture/components/layout.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useEffect, useState, useRef, useCallback } from \"react\";\nimport dynamic from \"next/dynamic\";\nimport styled, { createGlobalStyle } from \"styled-components\";\nimport Header from \"./header\";\nimport Nav from \"./Nav\";\nimport NavTrigger from \"./NavTrigger\";\nimport { useRouter } from \"next/router\";\nimport CookieMessage from \"./CookieMessage\";\nimport ScrollIncentive from \"./ScrollIncentive\";\nimport { initGA, logPageView } from \"utils/analytics\";\nimport ReactPixel from \"react-facebook-pixel\";\nimport { disableBodyScroll, enableBodyScroll } from \"body-scroll-lock\";\nimport NewsletterPopup from \"./NewsletterPopup\";\nexport default (({\n  children,\n  toggleLang,\n  checkForConsent,\n  consentToCookies,\n  hasToConsent,\n  hasLoaded,\n  locale\n}) => {\n  const {\n    0: isOpen,\n    1: setOpen\n  } = useState(false);\n  const {\n    0: showSketch,\n    1: setShowSketch\n  } = useState(true);\n  const {\n    0: isAbout,\n    1: setIsAbout\n  } = useState(false);\n  const {\n    0: headerTitle,\n    1: setTitle\n  } = useState(\"\");\n  const {\n    0: showArrow,\n    1: setShowArrow\n  } = useState(false);\n  const {\n    0: showConsentMessage,\n    1: setShowConsentMessage\n  } = useState(true);\n  const {\n    0: showPopup,\n    1: setShowPopup\n  } = useState(false);\n  const router = useRouter();\n  const mouse = useRef([1200, 1]);\n  const onMouseMove = useCallback(({\n    clientX: x,\n    clientY: y\n  }) => mouse.current = [x - window.innerWidth / 2, y - window.innerHeight / 2], [mouse.current]);\n  const onTouchMove = useCallback(e => {\n    const touch = e.changedTouches[0];\n    var x = touch.clientX;\n    var y = touch.clientY;\n    mouse.current = [x - window.innerWidth / 2, y - window.innerHeight / 2];\n  }, [mouse.current]);\n  useEffect(() => {\n    const options = {\n      autoConfig: true,\n      debug: false\n    };\n    ReactPixel.init(\"506854653278097\", null, options);\n  }, []);\n  useEffect(() => {\n    if (!window.GA_INITIALIZED) {\n      initGA();\n      window.GA_INITIALIZED = true;\n    }\n\n    logPageView();\n    ReactPixel.pageView(); // For tracking page view\n\n    mouse.current[0] = window.innerWidth > 600 ? 1200 : 300;\n\n    if (router.route === \"/\" || router.route === \"/en\") {\n      setShowSketch(true);\n      setShowArrow(true);\n      setIsAbout(false);\n      setShowPopup(false);\n    } else if (router.route === \"/nosotros\" || router.route === \"/en/about\") {\n      setIsAbout(true);\n      setShowSketch(false);\n      setShowArrow(false);\n      setShowPopup(false);\n    } else if (router.route === \"/podcast\") {\n      setIsAbout(false);\n      setShowSketch(false);\n      setShowArrow(false);\n      setShowPopup(true);\n    } else {\n      setShowSketch(false);\n      setShowArrow(false);\n      setIsAbout(false);\n      setShowPopup(false);\n    }\n  }, [router.route]);\n  useEffect(() => {\n    if (showArrow || showConsentMessage) {\n      document.body.onscroll = function () {\n        checkScroll();\n      };\n\n      document.querySelector(\"#Clipper\").onscroll = function () {\n        checkScroll();\n      };\n    }\n  }, [showArrow]);\n  useEffect(() => {\n    let targetElement = document.querySelector(\"#Nav\");\n\n    if (isOpen) {\n      disableBodyScroll(targetElement);\n    } else {\n      enableBodyScroll(targetElement);\n    }\n  }, [isOpen]);\n\n  const checkScroll = () => {\n    if (document.getElementById(\"Clipper\").scrollTop > 100 || window.scrollY > 100) {\n      document.body.onscroll = null;\n      document.querySelector(\"#Clipper\").onscroll = null;\n      setShowArrow(false);\n      checkForConsent();\n      setShowConsentMessage(false);\n    }\n  };\n\n  const toggleNav = () => {\n    setOpen(!isOpen);\n  };\n\n  const closeNav = () => {\n    setOpen(false);\n  };\n\n  const doConsentToCookies = () => {\n    consentToCookies();\n  };\n\n  return __jsx(React.Fragment, null, __jsx(PageWrapper, {\n    id: \"Wrapper\",\n    onMouseMove: showSketch | isAbout ? onMouseMove : undefined,\n    onTouchMove: showSketch | isAbout ? onTouchMove : undefined,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 7\n    }\n  }, __jsx(Border, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 9\n    }\n  }), __jsx(NavTrigger, {\n    toggleNav: toggleNav,\n    isOpen: isOpen,\n    hasLoaded: hasLoaded,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 9\n    }\n  }), __jsx(Header, {\n    isOpen: isOpen,\n    headerTitle: headerTitle,\n    hasLoaded: hasLoaded,\n    closeNav: closeNav,\n    locale: locale,\n    route: router.route,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 9\n    }\n  }), React.cloneElement(children, {\n    setTitle: setTitle,\n    hasLoaded: hasLoaded,\n    mouse: mouse\n  }), __jsx(CookieMessage, {\n    locale: locale,\n    doConsentToCookies: doConsentToCookies,\n    hasToConsent: hasToConsent,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 9\n    }\n  }), __jsx(BodyOverflow, {\n    isOpen: isOpen,\n    hasLoaded: hasLoaded,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 9\n    }\n  }), showPopup && __jsx(NewsletterPopup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 23\n    }\n  })));\n});\nconst BodyOverflow = createGlobalStyle`\n  .TopBar{\n    box-shadow: 1px 1px 4px ${props => props.theme.colors.accent};\n  }\n  @media (max-width: 600px), (max-height:450px) {\n    .react-reveal {\n    animation: none !important;\n    opacity: 1 !important;\n    }\n    #Wrapper{\n      overflow: ${props => props.hasLoaded ? \"unset\" : \"hidden\"};\n      height:${props => props.hasLoaded ? \"unset\" : \"100%\"};\n    }\n    body {\n    overflow-y: ${props => props.hasLoaded ? \"auto\" : \"hidden\"};\n      &:after,&:before{\n        content: \" \";\n        position: fixed;\n        right: 0;\n        left: 0;\n        height: 18px;\n        z-index:100;\n        background-color: ${props => props.theme.colors.background};\n      }\n      &:before {\n        top:0;\n      }\n      &:after {\n        bottom:0;\n      }\n    }  \n  }\n`;\nconst BackgroundOpacity = styled.div`\n  background-color: ${props => props.theme.colors.background};\n  opacity: ${props => props.visible ? 0.6 : 0};\n  position: fixed;\n  pointer-events: ${props => props.visible ? \"auto\" : \"none\"};\n  left: 0;\n  bottom: 0;\n  right: 0;\n  top: 0;\n  z-index: 13;\n  transition: opacity 0.4s ease;\n`;\nconst PageWrapper = styled.div`\n  top: -3px;\n  position: relative;\n  width: 100%;\n  flex-direction: column;\n  display: flex;\n  justify-content: flex-start;\n  color: ${props => props.theme.colors.foreground};\n  background-color: ${props => props.theme.colors.background};\n`;\nconst Border = styled.div`\n  opacity: 1;\n  pointer-events: none;\n  z-index: 99;\n  width: calc(100% - 36px);\n  height: calc(100% - 36px);\n  background-color: none;\n  position: fixed;\n  left: 18px;\n  top: 18px;\n  right: 18px;\n  bottom: 18px;\n  margin: 0 auto;\n  max-width: 1504px;\n  mix-blend-mode: exclusion;\n  transition: opacity 0.3s ease-in, border 0.3s ease-in;\n  border: ${props => `${props.theme.stroke} solid ${props.theme.colors.foreground}`};\n  @media (max-width: 600px), (max-height: 450px) {\n    mix-blend-mode: normal;\n  }\n`;","map":{"version":3,"sources":["/Users/rodrigosalmeron/Sites/deepfuture/components/layout.js"],"names":["useEffect","useState","useRef","useCallback","dynamic","styled","createGlobalStyle","Header","Nav","NavTrigger","useRouter","CookieMessage","ScrollIncentive","initGA","logPageView","ReactPixel","disableBodyScroll","enableBodyScroll","NewsletterPopup","children","toggleLang","checkForConsent","consentToCookies","hasToConsent","hasLoaded","locale","isOpen","setOpen","showSketch","setShowSketch","isAbout","setIsAbout","headerTitle","setTitle","showArrow","setShowArrow","showConsentMessage","setShowConsentMessage","showPopup","setShowPopup","router","mouse","onMouseMove","clientX","x","clientY","y","current","window","innerWidth","innerHeight","onTouchMove","e","touch","changedTouches","options","autoConfig","debug","init","GA_INITIALIZED","pageView","route","document","body","onscroll","checkScroll","querySelector","targetElement","getElementById","scrollTop","scrollY","toggleNav","closeNav","doConsentToCookies","undefined","React","cloneElement","BodyOverflow","props","theme","colors","accent","background","BackgroundOpacity","div","visible","PageWrapper","foreground","Border","stroke"],"mappings":"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","sourcesContent":["import { useEffect, useState, useRef, useCallback } from \"react\";\nimport dynamic from \"next/dynamic\";\nimport styled, { createGlobalStyle } from \"styled-components\";\nimport Header from \"./header\";\nimport Nav from \"./Nav\";\nimport NavTrigger from \"./NavTrigger\";\nimport { useRouter } from \"next/router\";\nimport CookieMessage from \"./CookieMessage\";\nimport ScrollIncentive from \"./ScrollIncentive\";\nimport { initGA, logPageView } from \"utils/analytics\";\nimport ReactPixel from \"react-facebook-pixel\";\nimport { disableBodyScroll, enableBodyScroll } from \"body-scroll-lock\";\nimport NewsletterPopup from \"./NewsletterPopup\";\n\nexport default ({\n  children,\n  toggleLang,\n  checkForConsent,\n  consentToCookies,\n  hasToConsent,\n  hasLoaded,\n  locale,\n}) => {\n  const [isOpen, setOpen] = useState(false);\n  const [showSketch, setShowSketch] = useState(true);\n  const [isAbout, setIsAbout] = useState(false);\n  const [headerTitle, setTitle] = useState(\"\");\n  const [showArrow, setShowArrow] = useState(false);\n  const [showConsentMessage, setShowConsentMessage] = useState(true);\n  const [showPopup, setShowPopup] = useState(false);\n  const router = useRouter();\n  const mouse = useRef([1200, 1]);\n\n  const onMouseMove = useCallback(\n    ({ clientX: x, clientY: y }) =>\n      (mouse.current = [x - window.innerWidth / 2, y - window.innerHeight / 2]),\n    [mouse.current]\n  );\n\n  const onTouchMove = useCallback(\n    (e) => {\n      const touch = e.changedTouches[0];\n      var x = touch.clientX;\n      var y = touch.clientY;\n      mouse.current = [x - window.innerWidth / 2, y - window.innerHeight / 2];\n    },\n    [mouse.current]\n  );\n\n  useEffect(() => {\n    const options = {\n      autoConfig: true, \n      debug: false,\n    };\n    ReactPixel.init(\"506854653278097\", null, options);\n  }, []);\n\n  useEffect(() => {\n    if (!window.GA_INITIALIZED) {\n      initGA();\n      window.GA_INITIALIZED = true;\n    }\n    logPageView();\n    ReactPixel.pageView(); // For tracking page view\n    mouse.current[0] = window.innerWidth > 600 ? 1200 : 300;\n    if (router.route === \"/\" || router.route === \"/en\") {\n      setShowSketch(true);\n      setShowArrow(true);\n      setIsAbout(false);\n      setShowPopup(false);\n    } else if (router.route === \"/nosotros\" || router.route === \"/en/about\") {\n      setIsAbout(true);\n      setShowSketch(false);\n      setShowArrow(false);\n      setShowPopup(false);\n    } else if (router.route === \"/podcast\") {\n      setIsAbout(false);\n      setShowSketch(false);\n      setShowArrow(false);\n      setShowPopup(true);\n    } else {\n      setShowSketch(false);\n      setShowArrow(false);\n      setIsAbout(false);\n      setShowPopup(false);\n    }\n  }, [router.route]);\n\n  useEffect(() => {\n    if (showArrow || showConsentMessage) {\n      document.body.onscroll = function () {\n        checkScroll();\n      };\n      document.querySelector(\"#Clipper\").onscroll = function () {\n        checkScroll();\n      };\n    }\n  }, [showArrow]);\n\n  useEffect(() => {\n    let targetElement = document.querySelector(\"#Nav\");\n    if (isOpen) {\n      disableBodyScroll(targetElement);\n    } else {\n      enableBodyScroll(targetElement);\n    }\n  }, [isOpen]);\n\n  const checkScroll = () => {\n    if (\n      document.getElementById(\"Clipper\").scrollTop > 100 ||\n      window.scrollY > 100\n    ) {\n      document.body.onscroll = null;\n      document.querySelector(\"#Clipper\").onscroll = null;\n      setShowArrow(false);\n      checkForConsent();\n      setShowConsentMessage(false);\n    }\n  };\n\n  const toggleNav = () => {\n    setOpen(!isOpen);\n  };\n\n  const closeNav = () => {\n    setOpen(false);\n  };\n\n  const doConsentToCookies = () => {\n    consentToCookies();\n  };\n\n  return (\n    <>\n      <PageWrapper\n        id=\"Wrapper\"\n        onMouseMove={showSketch | isAbout ? onMouseMove : undefined}\n        onTouchMove={showSketch | isAbout ? onTouchMove : undefined}\n      >\n        <Border />\n        <NavTrigger\n          toggleNav={toggleNav}\n          isOpen={isOpen}\n          hasLoaded={hasLoaded}\n        />\n        <Header\n          isOpen={isOpen}\n          headerTitle={headerTitle}\n          hasLoaded={hasLoaded}\n          closeNav={closeNav}\n          locale={locale}\n          route={router.route}\n        />\n        {React.cloneElement(children, {\n          setTitle: setTitle,\n          hasLoaded: hasLoaded,\n          mouse: mouse,\n        })}\n        <CookieMessage\n          locale={locale}\n          doConsentToCookies={doConsentToCookies}\n          hasToConsent={hasToConsent}\n        />\n        <BodyOverflow isOpen={isOpen} hasLoaded={hasLoaded} />\n        {showPopup && <NewsletterPopup />}\n      </PageWrapper>\n    </>\n  );\n};\n\nconst BodyOverflow = createGlobalStyle`\n  .TopBar{\n    box-shadow: 1px 1px 4px ${(props) => props.theme.colors.accent};\n  }\n  @media (max-width: 600px), (max-height:450px) {\n    .react-reveal {\n    animation: none !important;\n    opacity: 1 !important;\n    }\n    #Wrapper{\n      overflow: ${(props) => (props.hasLoaded ? \"unset\" : \"hidden\")};\n      height:${(props) => (props.hasLoaded ? \"unset\" : \"100%\")};\n    }\n    body {\n    overflow-y: ${(props) => (props.hasLoaded ? \"auto\" : \"hidden\")};\n      &:after,&:before{\n        content: \" \";\n        position: fixed;\n        right: 0;\n        left: 0;\n        height: 18px;\n        z-index:100;\n        background-color: ${(props) => props.theme.colors.background};\n      }\n      &:before {\n        top:0;\n      }\n      &:after {\n        bottom:0;\n      }\n    }  \n  }\n`;\n\nconst BackgroundOpacity = styled.div`\n  background-color: ${(props) => props.theme.colors.background};\n  opacity: ${(props) => (props.visible ? 0.6 : 0)};\n  position: fixed;\n  pointer-events: ${(props) => (props.visible ? \"auto\" : \"none\")};\n  left: 0;\n  bottom: 0;\n  right: 0;\n  top: 0;\n  z-index: 13;\n  transition: opacity 0.4s ease;\n`;\n\nconst PageWrapper = styled.div`\n  top: -3px;\n  position: relative;\n  width: 100%;\n  flex-direction: column;\n  display: flex;\n  justify-content: flex-start;\n  color: ${(props) => props.theme.colors.foreground};\n  background-color: ${(props) => props.theme.colors.background};\n`;\n\nconst Border = styled.div`\n  opacity: 1;\n  pointer-events: none;\n  z-index: 99;\n  width: calc(100% - 36px);\n  height: calc(100% - 36px);\n  background-color: none;\n  position: fixed;\n  left: 18px;\n  top: 18px;\n  right: 18px;\n  bottom: 18px;\n  margin: 0 auto;\n  max-width: 1504px;\n  mix-blend-mode: exclusion;\n  transition: opacity 0.3s ease-in, border 0.3s ease-in;\n  border: ${(props) =>\n    `${props.theme.stroke} solid ${props.theme.colors.foreground}`};\n  @media (max-width: 600px), (max-height: 450px) {\n    mix-blend-mode: normal;\n  }\n`;\n"]},"metadata":{},"sourceType":"module"}