{"ast":null,"code":"var __jsx = React.createElement;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React from \"react\";\nimport App from \"next/app\";\nimport Router from \"next/router\";\nimport { ThemeProvider } from \"styled-components\";\nimport LoadingBar from \"react-top-loading-bar\";\nimport Layout from \"components/layout\";\nimport theme from \"styles/theme\";\nimport Cookies from \"js-cookie/dist/js.cookie\"; // import en from \"public/locales/en/common.json\";\n\nimport es from \"public/locales/es/common.json\";\nimport { LangProvider } from \"utils/LangContext\";\nimport { withRouter } from \"next/router\";\nimport { disableBodyScroll, enableBodyScroll } from \"body-scroll-lock\";\n\nclass MyApp extends App {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"toggleLang\", lang => {\n      let language = lang === \"en\" ? en : es;\n      Cookies.set(\"chosenLang\", lang);\n      this.setState({\n        locale: language\n      });\n    });\n\n    _defineProperty(this, \"handleRouteComplete\", url => {\n      var _myself = this;\n\n      setTimeout(function () {\n        _myself.LoadingBar.complete();\n      }, 300);\n    });\n\n    _defineProperty(this, \"handleRouteStart\", url => {\n      this.LoadingBar.continuousStart();\n    });\n\n    _defineProperty(this, \"handleRouteError\", (err, url) => {\n      var _myself = this;\n\n      setTimeout(function () {\n        if (err.cancelled) {\n          console.log(`${err} on route to ${url}`);\n        }\n\n        _myself.LoadingBar.complete();\n      }, 300);\n    });\n\n    _defineProperty(this, \"checkForConsent\", () => {\n      // Check if cookie message has been closed before\n      var _C = Cookies.get(\"showCookieMessage\");\n\n      if (_C === undefined) {\n        this.setState({\n          hasToConsent: true\n        });\n      } else if (_C === \"false\") {\n        this.setState({\n          hasToConsent: false\n        });\n      }\n    });\n\n    _defineProperty(this, \"consentToCookies\", () => {\n      Cookies.set(\"showCookieMessage\", \"false\");\n      this.setState({\n        hasToConsent: false\n      });\n    });\n\n    this.state = {\n      // locale: props.router.route.includes(\"/en\") ? en : es,\n      locale: es,\n      hasToConsent: false,\n      //return hasLoaded to false\n      hasLoaded: true,\n      readyToScroll: false\n    };\n  }\n\n  authenticate() {\n    return new Promise(resolve => setTimeout(resolve, 1500)); //1500\n  }\n\n  componentDidMount() {\n    // Disable scroll\n    // Esto es importante para el loading icon\n    const targetElement = document.querySelector(\"#logo\"); //dummy\n\n    disableBodyScroll(targetElement); // Load Animation\n\n    this.authenticate().then(() => {\n      const bordered = document.getElementById(\"bordered\");\n      const logo = document.getElementById(\"logo\");\n      const revealer = document.getElementById(\"revealer\");\n\n      if (bordered) {\n        setTimeout(() => {\n          // transition out\n          bordered.classList.add(\"hidden\");\n          logo.style.opacity = \"0\"; // bordered.style.transform = \"scale(1)\";\n          // bordered.style.borderWidth = \"2px\";\n\n          setTimeout(() => {\n            revealer.style.opacity = \"0\";\n            revealer.style.pointerEvents = \"none\";\n            this.setState({\n              hasLoaded: true\n            }, () => console.log(\"Page hasLoaded\"), enableBodyScroll(targetElement));\n          }, 500);\n          setTimeout(() => {\n            // remove from DOM\n            bordered.remove();\n            revealer.remove();\n            logo.remove();\n          }, 3000);\n        }, 500);\n      }\n    }); // router event listeners for loadingBar\n\n    Router.events.on(\"routeChangeStart\", this.handleRouteStart);\n    Router.events.on(\"routeChangeComplete\", this.handleRouteComplete);\n    Router.events.on(\"routeChangeError\", this.handleRouteError);\n  }\n\n  componentWillUnmount() {\n    Router.events.off(\"routeChangeStart\", this.handleRouteStart);\n    Router.events.off(\"routeChangeComplete\", this.handleRouteComplete);\n    Router.events.off(\"routeChangeError\", this.handleRouteError);\n  }\n\n  render() {\n    const {\n      Component,\n      pageProps\n    } = this.props;\n    return __jsx(ThemeProvider, {\n      theme: theme\n    }, __jsx(LangProvider, {\n      value: this.state.locale\n    }, __jsx(LoadingBar, {\n      onRef: ref => this.LoadingBar = ref,\n      height: 3,\n      color: theme.colors.accent,\n      className: \"TopBar\"\n    }), __jsx(Layout, {\n      locale: this.state.locale,\n      checkForConsent: this.checkForConsent,\n      consentToCookies: this.consentToCookies,\n      hasToConsent: this.state.hasToConsent,\n      hasLoaded: this.state.hasLoaded,\n      toggleLang: this.toggleLang\n    }, __jsx(Component, _extends({\n      locale: this.state.locale\n    }, pageProps, {\n      lang: this.state.locale.lang\n    })))));\n  }\n\n}\n\nexport default withRouter(MyApp);","map":null,"metadata":{},"sourceType":"module"}