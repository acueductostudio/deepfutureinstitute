{"ast":null,"code":"import _taggedTemplateLiteral from \"@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/rodrigosalmeron/Sites/deepfuture/components/layout.js\";\n\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  .TopBar{\\n    box-shadow: 1px 1px 4px \", \";\\n  }\\n  @media (max-width: 600px), (max-height:450px) {\\n    .react-reveal {\\n    animation: none !important;\\n    opacity: 1 !important;\\n    }\\n    #Wrapper{\\n      overflow: \", \";\\n      height:\", \";\\n    }\\n    body {\\n    overflow-y: \", \";\\n      &:after,&:before{\\n        content: \\\" \\\";\\n        position: fixed;\\n        right: 0;\\n        left: 0;\\n        height: 18px;\\n        z-index:100;\\n        background-color: \", \";\\n      }\\n      &:before {\\n        top:0;\\n      }\\n      &:after {\\n        bottom:0;\\n      }\\n    }  \\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport { useEffect, useState, useRef, useCallback } from \"react\";\nimport styled, { createGlobalStyle } from \"styled-components\";\nimport Header from \"./header\";\nimport { useRouter } from \"next/router\";\nimport CookieMessage from \"./CookieMessage\";\nimport { initGA, logPageView } from \"utils/analytics\";\nimport ReactPixel from \"react-facebook-pixel\";\nimport { disableBodyScroll, enableBodyScroll } from \"body-scroll-lock\";\nimport NewsletterPopup from \"./NewsletterPopup\";\nimport Imago from \"public/assets/img/layout/logos/dfiimago.svg\";\nexport default (function (_ref) {\n  var children = _ref.children,\n      toggleLang = _ref.toggleLang,\n      checkForConsent = _ref.checkForConsent,\n      consentToCookies = _ref.consentToCookies,\n      hasToConsent = _ref.hasToConsent,\n      hasLoaded = _ref.hasLoaded,\n      locale = _ref.locale;\n\n  var _useState = useState(false),\n      isOpen = _useState[0],\n      setOpen = _useState[1];\n\n  var _useState2 = useState(true),\n      showSketch = _useState2[0],\n      setShowSketch = _useState2[1];\n\n  var _useState3 = useState(false),\n      isAbout = _useState3[0],\n      setIsAbout = _useState3[1];\n\n  var _useState4 = useState(\"\"),\n      headerTitle = _useState4[0],\n      setTitle = _useState4[1];\n\n  var _useState5 = useState(false),\n      showArrow = _useState5[0],\n      setShowArrow = _useState5[1];\n\n  var _useState6 = useState(true),\n      showConsentMessage = _useState6[0],\n      setShowConsentMessage = _useState6[1];\n\n  var _useState7 = useState(false),\n      showPopup = _useState7[0],\n      setShowPopup = _useState7[1];\n\n  var router = useRouter();\n  var mouse = useRef([1200, 1]);\n  var onMouseMove = useCallback(function (_ref2) {\n    var x = _ref2.clientX,\n        y = _ref2.clientY;\n    return mouse.current = [x - window.innerWidth / 2, y - window.innerHeight / 2];\n  }, [mouse.current]);\n  var onTouchMove = useCallback(function (e) {\n    var touch = e.changedTouches[0];\n    var x = touch.clientX;\n    var y = touch.clientY;\n    mouse.current = [x - window.innerWidth / 2, y - window.innerHeight / 2];\n  }, [mouse.current]);\n  useEffect(function () {// const options = {\n    //   autoConfig: true, \n    //   debug: false,\n    // };\n    // ReactPixel.init(\"506854653278097\", null, options);\n  }, []);\n  useEffect(function () {\n    // if (!window.GA_INITIALIZED) {\n    //   initGA();\n    //   window.GA_INITIALIZED = true;\n    // }\n    // logPageView();\n    // ReactPixel.pageView(); // For tracking page view\n    mouse.current[0] = window.innerWidth > 600 ? 1200 : 300;\n\n    if (router.route === \"/\" || router.route === \"/en\") {\n      setShowSketch(true);\n      setShowArrow(true);\n      setIsAbout(false);\n      setShowPopup(false);\n    } else if (router.route === \"/nosotros\" || router.route === \"/en/about\") {\n      setIsAbout(true);\n      setShowSketch(false);\n      setShowArrow(false);\n      setShowPopup(false);\n    } else if (router.route === \"/podcast\") {\n      setIsAbout(false);\n      setShowSketch(false);\n      setShowArrow(false);\n      setShowPopup(true);\n    } else {\n      setShowSketch(false);\n      setShowArrow(false);\n      setIsAbout(false);\n      setShowPopup(false);\n    }\n  }, [router.route]);\n  useEffect(function () {\n    if (showArrow || showConsentMessage) {\n      document.body.onscroll = function () {\n        checkScroll();\n      };\n    }\n  }, [showArrow]); // useEffect(() => {\n  //   let targetElement = document.querySelector(\"#Nav\");\n  //   if (isOpen) {\n  //     disableBodyScroll(targetElement);\n  //   } else {\n  //     enableBodyScroll(targetElement);\n  //   }\n  // }, [isOpen]);\n\n  var checkScroll = function checkScroll() {\n    if (document.body.scrollTop > 100 || window.scrollY > 100) {\n      document.body.onscroll = null; // document.querySelector(\"#Clipper\").onscroll = null;\n\n      setShowArrow(false);\n      checkForConsent();\n      setShowConsentMessage(false);\n    }\n  };\n\n  var toggleNav = function toggleNav() {\n    setOpen(!isOpen);\n  };\n\n  var closeNav = function closeNav() {\n    setOpen(false);\n  };\n\n  var doConsentToCookies = function doConsentToCookies() {\n    consentToCookies();\n  };\n\n  return __jsx(React.Fragment, null, __jsx(PageWrapper, {\n    id: \"Wrapper\",\n    onMouseMove: showSketch | isAbout ? onMouseMove : undefined,\n    onTouchMove: showSketch | isAbout ? onTouchMove : undefined,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 7\n    }\n  }, __jsx(Header, {\n    isOpen: isOpen,\n    headerTitle: headerTitle,\n    hasLoaded: hasLoaded,\n    closeNav: closeNav,\n    locale: locale,\n    route: router.route,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 9\n    }\n  }), React.cloneElement(children, {\n    setTitle: setTitle,\n    hasLoaded: hasLoaded,\n    mouse: mouse\n  }), __jsx(CookieMessage, {\n    locale: locale,\n    doConsentToCookies: doConsentToCookies,\n    hasToConsent: hasToConsent,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 9\n    }\n  }), __jsx(BodyOverflow, {\n    isOpen: isOpen,\n    hasLoaded: hasLoaded,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 9\n    }\n  }), showPopup && __jsx(NewsletterPopup, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 23\n    }\n  }), __jsx(Footer, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 9\n    }\n  }, \"\\xA9 Deep Future Institute, 2020\", __jsx(Imago, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 9\n    }\n  }))));\n});\nvar BodyOverflow = createGlobalStyle(_templateObject(), function (props) {\n  return props.theme.colors.accent;\n}, function (props) {\n  return props.hasLoaded ? \"unset\" : \"hidden\";\n}, function (props) {\n  return props.hasLoaded ? \"unset\" : \"100%\";\n}, function (props) {\n  return props.hasLoaded ? \"auto\" : \"hidden\";\n}, function (props) {\n  return props.theme.colors.background;\n});\nvar Footer = styled.footer.withConfig({\n  displayName: \"layout__Footer\",\n  componentId: \"sc-18mrapy-0\"\n})([\"display:flex;width:100%;max-width:1500px;margin:0 auto;justify-content:space-between;color:\", \";font-size:1.5rem;;padding-bottom:10% svg{width:50px;}\"], function (props) {\n  return props.theme.colors.foreground_low;\n});\nvar BackgroundOpacity = styled.div.withConfig({\n  displayName: \"layout__BackgroundOpacity\",\n  componentId: \"sc-18mrapy-1\"\n})([\"background-color:\", \";opacity:\", \";position:fixed;pointer-events:\", \";left:0;bottom:0;right:0;top:0;z-index:13;transition:opacity 0.4s ease;\"], function (props) {\n  return props.theme.colors.background;\n}, function (props) {\n  return props.visible ? 0.6 : 0;\n}, function (props) {\n  return props.visible ? \"auto\" : \"none\";\n});\nvar PageWrapper = styled.div.withConfig({\n  displayName: \"layout__PageWrapper\",\n  componentId: \"sc-18mrapy-2\"\n})([\"top:-3px;position:relative;width:100%;flex-direction:column;display:flex;justify-content:flex-start;color:\", \";background-color:\", \";\"], function (props) {\n  return props.theme.colors.foreground;\n}, function (props) {\n  return props.theme.colors.background;\n});\nvar Border = styled.div.withConfig({\n  displayName: \"layout__Border\",\n  componentId: \"sc-18mrapy-3\"\n})([\"opacity:1;pointer-events:none;z-index:99;width:calc(100% - 36px);height:calc(100% - 36px);background-color:none;position:fixed;left:18px;top:18px;right:18px;bottom:18px;margin:0 auto;max-width:1504px;mix-blend-mode:exclusion;transition:opacity 0.3s ease-in,border 0.3s ease-in;border:\", \";@media (max-width:600px),(max-height:450px){mix-blend-mode:normal;}\"], function (props) {\n  return \"\".concat(props.theme.stroke, \" solid \").concat(props.theme.colors.foreground);\n});","map":{"version":3,"sources":["/Users/rodrigosalmeron/Sites/deepfuture/components/layout.js"],"names":["useEffect","useState","useRef","useCallback","styled","createGlobalStyle","Header","useRouter","CookieMessage","initGA","logPageView","ReactPixel","disableBodyScroll","enableBodyScroll","NewsletterPopup","Imago","children","toggleLang","checkForConsent","consentToCookies","hasToConsent","hasLoaded","locale","isOpen","setOpen","showSketch","setShowSketch","isAbout","setIsAbout","headerTitle","setTitle","showArrow","setShowArrow","showConsentMessage","setShowConsentMessage","showPopup","setShowPopup","router","mouse","onMouseMove","x","clientX","y","clientY","current","window","innerWidth","innerHeight","onTouchMove","e","touch","changedTouches","route","document","body","onscroll","checkScroll","scrollTop","scrollY","toggleNav","closeNav","doConsentToCookies","undefined","React","cloneElement","BodyOverflow","props","theme","colors","accent","background","Footer","footer","foreground_low","BackgroundOpacity","div","visible","PageWrapper","foreground","Border","stroke"],"mappings":";;;;;;;;;;;;;;;;;;AAAA,SAASA,SAAT,EAAoBC,QAApB,EAA8BC,MAA9B,EAAsCC,WAAtC,QAAyD,OAAzD;AACA,OAAOC,MAAP,IAAiBC,iBAAjB,QAA0C,mBAA1C;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,SAASC,SAAT,QAA0B,aAA1B;AACA,OAAOC,aAAP,MAA0B,iBAA1B;AACA,SAASC,MAAT,EAAiBC,WAAjB,QAAoC,iBAApC;AACA,OAAOC,UAAP,MAAuB,sBAAvB;AACA,SAASC,iBAAT,EAA4BC,gBAA5B,QAAoD,kBAApD;AACA,OAAOC,eAAP,MAA4B,mBAA5B;AACA,OAAOC,KAAP,MAAkB,6CAAlB;AAEA,gBAAe,gBAQT;AAAA,MAPJC,QAOI,QAPJA,QAOI;AAAA,MANJC,UAMI,QANJA,UAMI;AAAA,MALJC,eAKI,QALJA,eAKI;AAAA,MAJJC,gBAII,QAJJA,gBAII;AAAA,MAHJC,YAGI,QAHJA,YAGI;AAAA,MAFJC,SAEI,QAFJA,SAEI;AAAA,MADJC,MACI,QADJA,MACI;;AAAA,kBACsBrB,QAAQ,CAAC,KAAD,CAD9B;AAAA,MACGsB,MADH;AAAA,MACWC,OADX;;AAAA,mBAEgCvB,QAAQ,CAAC,IAAD,CAFxC;AAAA,MAEGwB,UAFH;AAAA,MAEeC,aAFf;;AAAA,mBAG0BzB,QAAQ,CAAC,KAAD,CAHlC;AAAA,MAGG0B,OAHH;AAAA,MAGYC,UAHZ;;AAAA,mBAI4B3B,QAAQ,CAAC,EAAD,CAJpC;AAAA,MAIG4B,WAJH;AAAA,MAIgBC,QAJhB;;AAAA,mBAK8B7B,QAAQ,CAAC,KAAD,CALtC;AAAA,MAKG8B,SALH;AAAA,MAKcC,YALd;;AAAA,mBAMgD/B,QAAQ,CAAC,IAAD,CANxD;AAAA,MAMGgC,kBANH;AAAA,MAMuBC,qBANvB;;AAAA,mBAO8BjC,QAAQ,CAAC,KAAD,CAPtC;AAAA,MAOGkC,SAPH;AAAA,MAOcC,YAPd;;AAQJ,MAAMC,MAAM,GAAG9B,SAAS,EAAxB;AACA,MAAM+B,KAAK,GAAGpC,MAAM,CAAC,CAAC,IAAD,EAAO,CAAP,CAAD,CAApB;AAEA,MAAMqC,WAAW,GAAGpC,WAAW,CAC7B;AAAA,QAAYqC,CAAZ,SAAGC,OAAH;AAAA,QAAwBC,CAAxB,SAAeC,OAAf;AAAA,WACGL,KAAK,CAACM,OAAN,GAAgB,CAACJ,CAAC,GAAGK,MAAM,CAACC,UAAP,GAAoB,CAAzB,EAA4BJ,CAAC,GAAGG,MAAM,CAACE,WAAP,GAAqB,CAArD,CADnB;AAAA,GAD6B,EAG7B,CAACT,KAAK,CAACM,OAAP,CAH6B,CAA/B;AAMA,MAAMI,WAAW,GAAG7C,WAAW,CAC7B,UAAC8C,CAAD,EAAO;AACL,QAAMC,KAAK,GAAGD,CAAC,CAACE,cAAF,CAAiB,CAAjB,CAAd;AACA,QAAIX,CAAC,GAAGU,KAAK,CAACT,OAAd;AACA,QAAIC,CAAC,GAAGQ,KAAK,CAACP,OAAd;AACAL,IAAAA,KAAK,CAACM,OAAN,GAAgB,CAACJ,CAAC,GAAGK,MAAM,CAACC,UAAP,GAAoB,CAAzB,EAA4BJ,CAAC,GAAGG,MAAM,CAACE,WAAP,GAAqB,CAArD,CAAhB;AACD,GAN4B,EAO7B,CAACT,KAAK,CAACM,OAAP,CAP6B,CAA/B;AAUA5C,EAAAA,SAAS,CAAC,YAAM,CACd;AACA;AACA;AACA;AACA;AACD,GANQ,EAMN,EANM,CAAT;AAQAA,EAAAA,SAAS,CAAC,YAAM;AACd;AACA;AACA;AACA;AACA;AACA;AACAsC,IAAAA,KAAK,CAACM,OAAN,CAAc,CAAd,IAAmBC,MAAM,CAACC,UAAP,GAAoB,GAApB,GAA0B,IAA1B,GAAiC,GAApD;;AACA,QAAIT,MAAM,CAACe,KAAP,KAAiB,GAAjB,IAAwBf,MAAM,CAACe,KAAP,KAAiB,KAA7C,EAAoD;AAClD1B,MAAAA,aAAa,CAAC,IAAD,CAAb;AACAM,MAAAA,YAAY,CAAC,IAAD,CAAZ;AACAJ,MAAAA,UAAU,CAAC,KAAD,CAAV;AACAQ,MAAAA,YAAY,CAAC,KAAD,CAAZ;AACD,KALD,MAKO,IAAIC,MAAM,CAACe,KAAP,KAAiB,WAAjB,IAAgCf,MAAM,CAACe,KAAP,KAAiB,WAArD,EAAkE;AACvExB,MAAAA,UAAU,CAAC,IAAD,CAAV;AACAF,MAAAA,aAAa,CAAC,KAAD,CAAb;AACAM,MAAAA,YAAY,CAAC,KAAD,CAAZ;AACAI,MAAAA,YAAY,CAAC,KAAD,CAAZ;AACD,KALM,MAKA,IAAIC,MAAM,CAACe,KAAP,KAAiB,UAArB,EAAiC;AACtCxB,MAAAA,UAAU,CAAC,KAAD,CAAV;AACAF,MAAAA,aAAa,CAAC,KAAD,CAAb;AACAM,MAAAA,YAAY,CAAC,KAAD,CAAZ;AACAI,MAAAA,YAAY,CAAC,IAAD,CAAZ;AACD,KALM,MAKA;AACLV,MAAAA,aAAa,CAAC,KAAD,CAAb;AACAM,MAAAA,YAAY,CAAC,KAAD,CAAZ;AACAJ,MAAAA,UAAU,CAAC,KAAD,CAAV;AACAQ,MAAAA,YAAY,CAAC,KAAD,CAAZ;AACD;AACF,GA7BQ,EA6BN,CAACC,MAAM,CAACe,KAAR,CA7BM,CAAT;AA+BApD,EAAAA,SAAS,CAAC,YAAM;AACd,QAAI+B,SAAS,IAAIE,kBAAjB,EAAqC;AACnCoB,MAAAA,QAAQ,CAACC,IAAT,CAAcC,QAAd,GAAyB,YAAY;AACnCC,QAAAA,WAAW;AACZ,OAFD;AAGD;AACF,GANQ,EAMN,CAACzB,SAAD,CANM,CAAT,CAlEI,CA0EJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAMyB,WAAW,GAAG,SAAdA,WAAc,GAAM;AACxB,QACEH,QAAQ,CAACC,IAAT,CAAcG,SAAd,GAA0B,GAA1B,IACAZ,MAAM,CAACa,OAAP,GAAiB,GAFnB,EAGE;AACAL,MAAAA,QAAQ,CAACC,IAAT,CAAcC,QAAd,GAAyB,IAAzB,CADA,CAEA;;AACAvB,MAAAA,YAAY,CAAC,KAAD,CAAZ;AACAd,MAAAA,eAAe;AACfgB,MAAAA,qBAAqB,CAAC,KAAD,CAArB;AACD;AACF,GAXD;;AAaA,MAAMyB,SAAS,GAAG,SAAZA,SAAY,GAAM;AACtBnC,IAAAA,OAAO,CAAC,CAACD,MAAF,CAAP;AACD,GAFD;;AAIA,MAAMqC,QAAQ,GAAG,SAAXA,QAAW,GAAM;AACrBpC,IAAAA,OAAO,CAAC,KAAD,CAAP;AACD,GAFD;;AAIA,MAAMqC,kBAAkB,GAAG,SAArBA,kBAAqB,GAAM;AAC/B1C,IAAAA,gBAAgB;AACjB,GAFD;;AAIA,SACE,4BACE,MAAC,WAAD;AACE,IAAA,EAAE,EAAC,SADL;AAEE,IAAA,WAAW,EAAEM,UAAU,GAAGE,OAAb,GAAuBY,WAAvB,GAAqCuB,SAFpD;AAGE,IAAA,WAAW,EAAErC,UAAU,GAAGE,OAAb,GAAuBqB,WAAvB,GAAqCc,SAHpD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAKE,MAAC,MAAD;AACE,IAAA,MAAM,EAAEvC,MADV;AAEE,IAAA,WAAW,EAAEM,WAFf;AAGE,IAAA,SAAS,EAAER,SAHb;AAIE,IAAA,QAAQ,EAAEuC,QAJZ;AAKE,IAAA,MAAM,EAAEtC,MALV;AAME,IAAA,KAAK,EAAEe,MAAM,CAACe,KANhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IALF,EAaGW,KAAK,CAACC,YAAN,CAAmBhD,QAAnB,EAA6B;AAC5Bc,IAAAA,QAAQ,EAAEA,QADkB;AAE5BT,IAAAA,SAAS,EAAEA,SAFiB;AAG5BiB,IAAAA,KAAK,EAAEA;AAHqB,GAA7B,CAbH,EAkBE,MAAC,aAAD;AACE,IAAA,MAAM,EAAEhB,MADV;AAEE,IAAA,kBAAkB,EAAEuC,kBAFtB;AAGE,IAAA,YAAY,EAAEzC,YAHhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAlBF,EAuBE,MAAC,YAAD;AAAc,IAAA,MAAM,EAAEG,MAAtB;AAA8B,IAAA,SAAS,EAAEF,SAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAvBF,EAwBGc,SAAS,IAAI,MAAC,eAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAxBhB,EAyBE,MAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yCAEA,MAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFA,CAzBF,CADF,CADF;AAkCD,CAtJD;AAwJA,IAAM8B,YAAY,GAAG5D,iBAAH,oBAEY,UAAC6D,KAAD;AAAA,SAAWA,KAAK,CAACC,KAAN,CAAYC,MAAZ,CAAmBC,MAA9B;AAAA,CAFZ,EAUA,UAACH,KAAD;AAAA,SAAYA,KAAK,CAAC7C,SAAN,GAAkB,OAAlB,GAA4B,QAAxC;AAAA,CAVA,EAWH,UAAC6C,KAAD;AAAA,SAAYA,KAAK,CAAC7C,SAAN,GAAkB,OAAlB,GAA4B,MAAxC;AAAA,CAXG,EAcA,UAAC6C,KAAD;AAAA,SAAYA,KAAK,CAAC7C,SAAN,GAAkB,MAAlB,GAA2B,QAAvC;AAAA,CAdA,EAsBU,UAAC6C,KAAD;AAAA,SAAWA,KAAK,CAACC,KAAN,CAAYC,MAAZ,CAAmBE,UAA9B;AAAA,CAtBV,CAAlB;AAkCA,IAAMC,MAAM,GAAGnE,MAAM,CAACoE,MAAV;AAAA;AAAA;AAAA,8JAMH,UAAAN,KAAK;AAAA,SAAIA,KAAK,CAACC,KAAN,CAAYC,MAAZ,CAAmBK,cAAvB;AAAA,CANF,CAAZ;AAcA,IAAMC,iBAAiB,GAAGtE,MAAM,CAACuE,GAAV;AAAA;AAAA;AAAA,qJACD,UAACT,KAAD;AAAA,SAAWA,KAAK,CAACC,KAAN,CAAYC,MAAZ,CAAmBE,UAA9B;AAAA,CADC,EAEV,UAACJ,KAAD;AAAA,SAAYA,KAAK,CAACU,OAAN,GAAgB,GAAhB,GAAsB,CAAlC;AAAA,CAFU,EAIH,UAACV,KAAD;AAAA,SAAYA,KAAK,CAACU,OAAN,GAAgB,MAAhB,GAAyB,MAArC;AAAA,CAJG,CAAvB;AAaA,IAAMC,WAAW,GAAGzE,MAAM,CAACuE,GAAV;AAAA;AAAA;AAAA,8IAON,UAACT,KAAD;AAAA,SAAWA,KAAK,CAACC,KAAN,CAAYC,MAAZ,CAAmBU,UAA9B;AAAA,CAPM,EAQK,UAACZ,KAAD;AAAA,SAAWA,KAAK,CAACC,KAAN,CAAYC,MAAZ,CAAmBE,UAA9B;AAAA,CARL,CAAjB;AAWA,IAAMS,MAAM,GAAG3E,MAAM,CAACuE,GAAV;AAAA;AAAA;AAAA,6WAgBA,UAACT,KAAD;AAAA,mBACLA,KAAK,CAACC,KAAN,CAAYa,MADP,oBACuBd,KAAK,CAACC,KAAN,CAAYC,MAAZ,CAAmBU,UAD1C;AAAA,CAhBA,CAAZ","sourcesContent":["import { useEffect, useState, useRef, useCallback } from \"react\";\nimport styled, { createGlobalStyle } from \"styled-components\";\nimport Header from \"./header\";\nimport { useRouter } from \"next/router\";\nimport CookieMessage from \"./CookieMessage\";\nimport { initGA, logPageView } from \"utils/analytics\";\nimport ReactPixel from \"react-facebook-pixel\";\nimport { disableBodyScroll, enableBodyScroll } from \"body-scroll-lock\";\nimport NewsletterPopup from \"./NewsletterPopup\";\nimport Imago from \"public/assets/img/layout/logos/dfiimago.svg\";\n\nexport default ({\n  children,\n  toggleLang,\n  checkForConsent,\n  consentToCookies,\n  hasToConsent,\n  hasLoaded,\n  locale,\n}) => {\n  const [isOpen, setOpen] = useState(false);\n  const [showSketch, setShowSketch] = useState(true);\n  const [isAbout, setIsAbout] = useState(false);\n  const [headerTitle, setTitle] = useState(\"\");\n  const [showArrow, setShowArrow] = useState(false);\n  const [showConsentMessage, setShowConsentMessage] = useState(true);\n  const [showPopup, setShowPopup] = useState(false);\n  const router = useRouter();\n  const mouse = useRef([1200, 1]);\n\n  const onMouseMove = useCallback(\n    ({ clientX: x, clientY: y }) =>\n      (mouse.current = [x - window.innerWidth / 2, y - window.innerHeight / 2]),\n    [mouse.current]\n  );\n\n  const onTouchMove = useCallback(\n    (e) => {\n      const touch = e.changedTouches[0];\n      var x = touch.clientX;\n      var y = touch.clientY;\n      mouse.current = [x - window.innerWidth / 2, y - window.innerHeight / 2];\n    },\n    [mouse.current]\n  );\n\n  useEffect(() => {\n    // const options = {\n    //   autoConfig: true, \n    //   debug: false,\n    // };\n    // ReactPixel.init(\"506854653278097\", null, options);\n  }, []);\n\n  useEffect(() => {\n    // if (!window.GA_INITIALIZED) {\n    //   initGA();\n    //   window.GA_INITIALIZED = true;\n    // }\n    // logPageView();\n    // ReactPixel.pageView(); // For tracking page view\n    mouse.current[0] = window.innerWidth > 600 ? 1200 : 300;\n    if (router.route === \"/\" || router.route === \"/en\") {\n      setShowSketch(true);\n      setShowArrow(true);\n      setIsAbout(false);\n      setShowPopup(false);\n    } else if (router.route === \"/nosotros\" || router.route === \"/en/about\") {\n      setIsAbout(true);\n      setShowSketch(false);\n      setShowArrow(false);\n      setShowPopup(false);\n    } else if (router.route === \"/podcast\") {\n      setIsAbout(false);\n      setShowSketch(false);\n      setShowArrow(false);\n      setShowPopup(true);\n    } else {\n      setShowSketch(false);\n      setShowArrow(false);\n      setIsAbout(false);\n      setShowPopup(false);\n    }\n  }, [router.route]);\n\n  useEffect(() => {\n    if (showArrow || showConsentMessage) {\n      document.body.onscroll = function () {\n        checkScroll();\n      };\n    }\n  }, [showArrow]);\n\n  // useEffect(() => {\n  //   let targetElement = document.querySelector(\"#Nav\");\n  //   if (isOpen) {\n  //     disableBodyScroll(targetElement);\n  //   } else {\n  //     enableBodyScroll(targetElement);\n  //   }\n  // }, [isOpen]);\n\n  const checkScroll = () => {\n    if (\n      document.body.scrollTop > 100 ||\n      window.scrollY > 100\n    ) {\n      document.body.onscroll = null;\n      // document.querySelector(\"#Clipper\").onscroll = null;\n      setShowArrow(false);\n      checkForConsent();\n      setShowConsentMessage(false);\n    }\n  };\n\n  const toggleNav = () => {\n    setOpen(!isOpen);\n  };\n\n  const closeNav = () => {\n    setOpen(false);\n  };\n\n  const doConsentToCookies = () => {\n    consentToCookies();\n  };\n\n  return (\n    <>\n      <PageWrapper\n        id=\"Wrapper\"\n        onMouseMove={showSketch | isAbout ? onMouseMove : undefined}\n        onTouchMove={showSketch | isAbout ? onTouchMove : undefined}\n      >\n        <Header\n          isOpen={isOpen}\n          headerTitle={headerTitle}\n          hasLoaded={hasLoaded}\n          closeNav={closeNav}\n          locale={locale}\n          route={router.route}\n        />\n        {React.cloneElement(children, {\n          setTitle: setTitle,\n          hasLoaded: hasLoaded,\n          mouse: mouse,\n        })}\n        <CookieMessage\n          locale={locale}\n          doConsentToCookies={doConsentToCookies}\n          hasToConsent={hasToConsent}\n        />\n        <BodyOverflow isOpen={isOpen} hasLoaded={hasLoaded} />\n        {showPopup && <NewsletterPopup />}\n        <Footer>\n        © Deep Future Institute, 2020\n        <Imago/>\n        </Footer>\n      </PageWrapper>\n    </>\n  );\n};\n\nconst BodyOverflow = createGlobalStyle`\n  .TopBar{\n    box-shadow: 1px 1px 4px ${(props) => props.theme.colors.accent};\n  }\n  @media (max-width: 600px), (max-height:450px) {\n    .react-reveal {\n    animation: none !important;\n    opacity: 1 !important;\n    }\n    #Wrapper{\n      overflow: ${(props) => (props.hasLoaded ? \"unset\" : \"hidden\")};\n      height:${(props) => (props.hasLoaded ? \"unset\" : \"100%\")};\n    }\n    body {\n    overflow-y: ${(props) => (props.hasLoaded ? \"auto\" : \"hidden\")};\n      &:after,&:before{\n        content: \" \";\n        position: fixed;\n        right: 0;\n        left: 0;\n        height: 18px;\n        z-index:100;\n        background-color: ${(props) => props.theme.colors.background};\n      }\n      &:before {\n        top:0;\n      }\n      &:after {\n        bottom:0;\n      }\n    }  \n  }\n`;\n\nconst Footer = styled.footer`\ndisplay:flex;\nwidth:100%;\nmax-width:1500px;\nmargin:0 auto;\njustify-content:space-between;\ncolor: ${props => props.theme.colors.foreground_low};\nfont-size:1.5rem;;\npadding-bottom:10%\nsvg{\n  width:50px;\n}\n`;\n\nconst BackgroundOpacity = styled.div`\n  background-color: ${(props) => props.theme.colors.background};\n  opacity: ${(props) => (props.visible ? 0.6 : 0)};\n  position: fixed;\n  pointer-events: ${(props) => (props.visible ? \"auto\" : \"none\")};\n  left: 0;\n  bottom: 0;\n  right: 0;\n  top: 0;\n  z-index: 13;\n  transition: opacity 0.4s ease;\n`;\n\nconst PageWrapper = styled.div`\n  top: -3px;\n  position: relative;\n  width: 100%;\n  flex-direction: column;\n  display: flex;\n  justify-content: flex-start;\n  color: ${(props) => props.theme.colors.foreground};\n  background-color: ${(props) => props.theme.colors.background};\n`;\n\nconst Border = styled.div`\n  opacity: 1;\n  pointer-events: none;\n  z-index: 99;\n  width: calc(100% - 36px);\n  height: calc(100% - 36px);\n  background-color: none;\n  position: fixed;\n  left: 18px;\n  top: 18px;\n  right: 18px;\n  bottom: 18px;\n  margin: 0 auto;\n  max-width: 1504px;\n  mix-blend-mode: exclusion;\n  transition: opacity 0.3s ease-in, border 0.3s ease-in;\n  border: ${(props) =>\n    `${props.theme.stroke} solid ${props.theme.colors.foreground}`};\n  @media (max-width: 600px), (max-height: 450px) {\n    mix-blend-mode: normal;\n  }\n`;\n"]},"metadata":{},"sourceType":"module"}